import {Injectable} from '@angular/core';
import {Recipe} from './Recipe';
import {Ingredient} from '../shared/ingredient';
import {ShoppingListService} from '../shoping-list/shopping-list.service';
import {Subject} from "rxjs/Subject";
@Injectable()
export class RecipeService {
  recipeChanged=new Subject<Recipe[]>();
  private recipes: Recipe[] = [
    new Recipe('Test recipe', 'It is done only for testing',
      'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRtB9KY7XH8-y7kg4boD7Mszq5eLx7vQ5j0YrhWIhvP0fTjwhhVpQ',
      [
        new Ingredient('sea meat', 1),
        new Ingredient('salt', 3)
      ]),
    new Recipe('Sweet', 'Something sweet to eat',
      'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxISERITExEVFhIVGBkWFhgYERkbGhgbGBcYFxgYHRkYHCggGholHRYXITEhJSkrLi8uFx8zODMtNygtLisBCgoKDg0OGhAQGy8mICItLS8tNTArLy0tNzU1KzUtLS0tLS8wLS8tLy0tLS0tLS0tLy0tLS0uLS0tLS0rLS0tLf/AABEIALcBEwMBIgACEQEDEQH/xAAcAAEAAgMBAQEAAAAAAAAAAAAABQYBBAcDAgj/xAA/EAABAwIEBQEGBAUCBAcAAAABAAIRAyEEEjFBBQYiUWFxEzKBkaGxI0LR8AdicsHhFBYzUlOCFTREg5Oi8f/EABoBAQADAQEBAAAAAAAAAAAAAAABAgMEBQb/xAAwEQACAgEDAgQEBQUBAAAAAAAAAQIDEQQhMRITBRRBUSJhgfAykaHB4SNScbHxFf/aAAwDAQACEQMRAD8A7gFlEQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBERAEREAREQBF516wY0k6KBq8WJOoj7aLz9X4jXp5qt7yfp+7IbwWJFEYXH54bMO3A+/p+qlmutK6KdRG3gJ5MoiLoJCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiIgCIiAIiIAiLCAyiwiAyiLBKAItHH8Up0QC46nKALknSB3vb1IWamLIDZbDjEjUAmNzEgTJPZpUZRftywnjkjeacYQ0MbqTsRPaIXlhMNToNDquU1Dc5iIaewGpPkA6yt2rTpVmh7mkObOV2jhFrg21NgZsQd1SeY8Y/DVx/qADP/DqZRDoN3DMDlj3iBJNr5QAvP8AKw7zukstnVpNJ3ZuMnv7F6w1UVSR7LKAYmwNr7Gbgi0WvN7KB5+qPbTosa9wa4unYGAMoP1UZheZKQqZQYaImPlGVtSARLfi02JmLFxv2eKw7R72aYggXym4OpifyzteLq1tasi0tn/J1V0PTaiE5R2/ghuTeaukUK0ktOUOkb6Aku9Y+GqvTHgiQZHhfn3HtqYet1e82xJaLgyAYM+R5hdT5H5jFcezceoCR1l0iTu4T2tJ+EK2mteOmR3eMeFqMfMU8Pd4LiiwFldp80EREAREQBERAEREAREQBERAEREAREQBERAEREBhEWUARYJWMyAySq1zfx8YemQPeP21ImRBgai4kWKscrkHPFV7q9QHLmDrfIx/SI0WVs+lHoeG6eN1uJcLczwTizsTxBj3i1NjiwezJAzBsE5r/pbstjjnECXupU20sxkOcJe5w6rAvJAnPUMbZhutPkbCMZSrYlzsji5lGiQ47kOdf4xtoVjAhvtYcLBxkEzBm8GJhcGoslGKx6n0kIVu2TS2gksenv8AXn8z0bwV7qLiGkCbDwQQQPFhbwonijqgomjVc51J0ZGudak78rwT7o1kaGT6q78Y48zDUi90nQNaBJcTt9Ddc14zxmtiHZiAwgzDTfuOo6xb1lZQqkmnGQ02rna33I/D9/eSJwONcyoGEX094Qdtfj912flJtSnQmu8PBFhctbcEAEDqkvuZIsuSe2AdTdlGZpN8omSe8GRbSBqe8qx4Pj72sNrgG4yN0DbD8MG5j1yrrWE8k6qFmpq6Fjn6l441ylhsRW9oargXAD2YcxoLWmC5tvJ/VfHDuE4XCSWh4e3Lma+qYkZg20bkSLaOtoqrgeLOa83d/MCxsPuIBI6XRrdoNozKdHF6dZtNtRjmuabOiwsJaepxcHHMZNxI1uTSVkd2uTjlTqoxVcpNw+X3v9/4LPwzmhlWoKZY5k+6SZnsD2JU+H+VTq/CXl9F7KcZHtdcgSAQdyrg5q6aJTafUeHrIUpxdXrys5PsOX0vFje4j0XoFucR9IiKQEREAREQBERAEREAREQBERAEREAWFlYQCVocT4zQoR7WoGyQO8TpMaDyVuOVK5zwbazshME+Bs0nv2LlnbJxjlG2nhCc0p8FqocQY8S1wI7gz9l7Ct4t+9lzXgeLGAYaGR9SZfLRMkROuliLDsVL4LmxsAllWnJI66cERMgjbQqsbVJZJtocZbcehczUvELS4nwWhXBFSix07lon4HUKPp824cTndlg5Zc0tBNrAuAk3Xth+ZcLUcWsrsLgJjOJGo01mRorvD5M49UXlEZiuS6IYGUi6kBmgtMu6jJMuOtzrOqgsbyPifaZ2VGOBEuzAtObvAnUR2vKvoxokWtutttRpGoWU6IT2Z2U+I6ir8Mvz3OZ8U5MxNYUwatOWEn8wiRG2vrC0x/DbEkOPtqcwS0BpuYsCTGUExe66z7ML6DFMaIrgj/0b8YT/AEOKVv4d46DZgO0OJ+w+q+6XKeKacn+mc8gTIHSTBsHOiF2g2WvRxjXGAR3HlJVR4yb1+K3x3wjmfDeA1WOIqUnW7XBnzZb+M4BiHlopUsrbAkkWHeN10XKD2WAwBY+Sh7ss/GbnLqwv2Nalg/w2tLjLQJPcgRK9KFN43EL0a4Tt8wvirimt8+gldXSjynJs9iE01KrfHOLVmscabL/kl4AkETmi4BBUZwjimNy1H1zSi8MOYBok6uaHZumL6XVXbFPBpGmTWS7MqA6L1UTwjFCoSW+7Eg/LbYa2UstIvKyZSi08MIiKSAiIgCIiAIiIAiIgCIiAIiIAsFZWEB8OVS5mp/jNP8p/t+itxVb5rwshrg/K4nKNLnUQDqbHus7s9OxrT+MqdbFvadZGozDT5RO+vdaxe2q8uqsolx0LqcHTeNRcwDpK9MULka3J+Hp4/sFpjtGux/djouHk9BbHm7A4ce9hqAcdmVToO0GBEDSNB2XlxHh+Hq5QHVWE3s7NBE3kmGm8mO/wWtiC0O8g2Ppb7HRfZeLWvEzt4+CZa4LEtV4pjGNAbUplgAAc+nUBECJOzjodpXrT5wxlMNllF3u6VC2xBkydL5du/hRDzIJBJ8f3+q8RTBG3k5bqVZNFHVW/Qt2G55c5+U4dwPdtamY+ZA+q2avN9USQ0NZo11R9pv8A8oM7aGbqiCi06CdT6aaTKy93QGk9Osf20/cqe9Mr5esvGM5hFek6lVqvEiHmlTyTOkElzgPhf4ryLnu9k+nVqCm0tBhgcCALiA2QdNYVPAmw+wkz5iYXq2paxPqN/rGqq7Zt7miqgljBaOJcRfUEMqh2UdQDywlw10/Kf6h6rYocylrQ0tDNoLjVEb3Lp1Pqqe0N7EEi99V9ACxA2TuTzyO3XjGCbGNklxDAZMdZIPeAScvcSAF8DGVRUkFgAjqEdrTFzaBPnVRLbkCwtOy2qLxMzO9vtZOp+5ZJe36G5gMa9peTcuJMOHTMyXRtM6aKSp4uo/wNIGl9bFQ1fiFKnlLnBpNgDJJPfK2TAttuFMcPw/tIuZsRbuLfT7qYeyKWJ46mi18uUYZO2gKmloU35MgJa1sXtqfC3wuyucXmK5R5knl5CIi1KhERAEREAREQBERAEREAREQBYWVhAYUPxvCZ30HGIpFzwDu4tyt+Uk+sKZKg+ZcU6m1pblt72bTLNzr+4VZ4xuWhnOxUuLUjmOZpDnSQRYGSO338KDrVYzZmwGfmNgTcWM3mfW3hW6nxzC1jarTze7Gce8biD+YelrqL5p4BVrPYaYblbJI02AB87/Ncs69m0d1M11KFm3zKpUptLszSTMCzpHqY31Xo6/8Ab9FPU+W3lpblYJsSXf4Ud/tCvTqh4LC0OktzOExNrGDrv2WKjL1R0SnTviRo3F5MRET8f0WHPABcCDlG20DX08q4NZRI/EotzCdGi6qXM3HaIqGlQphrgOqWdVyCInvfTspcPmUql3JdKR8tiZJmRtr8IWRSMOiZtE6qRwHJtZzc9bEPaSTDGOggG93DzsFJVuSKbmCC4uHeq643FzA7/NO1Nkytqi8ZyQNHDvizCYAMi94vJ7r3o8LrQRkgHS33my2eGcCr4eqWUaj8jup7KjQQ4xYtqNgCbA2Oima9PFBxGVoECDmJnvaE7fuZyuWdio1ajGVDScQKghrm+YDh5A6gtulw8SS4m9xDjGmgE9yvv/Y1SpVfXfiCajzJAblGgAsSbQANdlLM5dqD3y2O5db6KHU87Gkr6+lYe/qVzG+ypwc2YnQdvWdV7YLCPxDA17W0xI0eWkbg9JkH4hW3B8BZ3Y7uB9JUi9mHoMc5xp02MEuNgABuSVpCl5yzGepTj0pblGxXJOBw/s3GoWOF3kvkOvJ6XSbQbjsVbeB43DOfNKtTe6OoZ5I/7e/lVDnLEMx4pNoUS4Brj7VzHNI6m5Q3NEtcMx0O1t1qcuctmm4Go4GTo0mxu3XxJM+BsVZySe3JaMXZD+pJnX8NjmPN4Ia6Ads3jxtPdSqrPB6DXNykSLfTT7BWVostq+rLbx+5wTSTwjKIi2KBERAEREAREQBERAEREAREQBEWnUxwaXh0w0E2BJsJNgJJ9FWU4xxn1CWTbKgOZ6QLeoAtcC0giQf3K28Rx2ix2V2bNMQGzq0uEx7shrtYu0rwxFali6DvZVJHcCCDqJDhI+KpNqSwjaNc4Yk08e5yrHcLp03ZmtHcSAYv+/kvfC8y4qiBkIqN7PM23AJvoO+/wWeZaFWlOZpA2Ox17H0Vbp1yWiZF+3n/AAuVya4O7af4tzoGC54oOy+1p1ab4E/hFzZ3gtBsrBh+JYaqAW1abp/mE/I3C5S14O/+F8VGTIKsrX6oylp4vg6rWxOHaH9dOQCSPaNmB4nRc44tzUwPc1jadTIdXkgA6Q2BsocYa5EAgm1tPj+9F41cIwl3SLzc7aTb6/E6qHNNmlNajnLLbwr+IfR1NbnG0kj4b7KTw38QKbzDmED+X7X10VEbh22Out5N7iPHZH4ds66SAbHU6bTrqncx6s0ddTW8f9nVsNzDhHtzms1kah9iPhv6iVmjzVgXj/zDZ/ma5p+TgFyrKGiwBOgMebfL+wC28uUkWNrQRH1voY+KnvfIwemj7svfHecKFJsUfxqpsAxpLWzMOc6IgEe6DJVA4jxvGYiDWzGnEhksYJP9OvxX2HAadh2RrxJtsbDYSB8FErGzSquNbyjypCs0lzX+xzETkzAmLR0uA/YsvdpEguzPNhNR5cBBkQDYRstfEVQLzveO3w3XwTmA0AaOpxMD1N4+Kq5ZNcZ3J2hjHOiXEA2gHQAg6T6KwYJ5Jnvf4nZVPhRpdb3O9PPzFlceSsMcQX1CCKYd09Nu8yddR8lWG8sRF1cowc5cFw4BTgXEH0U2FHYSr1EF2nfxqtarzLQzZGvBdoDEtJvpGun1C7otJYZ5nbnY30ol6ldrSATBP7n0X2HDuqxxHjNBzqbjUyOY4WiTDhMgNuWkgX8HsV6U8c0vNZt5FhO0iG2+fwPdcV+u7EvjXw5xn6fa4InRZFdTWxZEXxRcS0EiCRJHbwvtegnlZMgiIpAREQBERAEREARFGcUw9S7mFxG7Z+wWOotlVW5xj1Y9EBj8RVpu6W52uHeC0/K4VYxdV7xUBDmF0t6ahzQT0kP7lsGdp8L6q1qucthzbwSWusCZ17fotbFcXaDD2mAcoi5Jd0yQN/ovDu1cpY2fOyN63jjnZ/kezuHUnNDXh5pkaB5a0DK5oJgyTlcbGwlc34Nxf/T4l/snO9k4lp0GZoIDTaBMeN/gr/xfH9MAggiS0AEkaQQdR8Fz/i2LrVsQKFHDNpFw/wCixpeJu9zos2219e8DfSzcuT0dDbY1KEnlP3ex1aqKdem0tcx7ItaZBG/kquYnk6jU0ljjpGgtpCj+B8Pq4Km4+2DnOOYxcNkCwmRl0cS7LEknafirzbVacwaCJnKekltrtm+hB0Xe8PlGXlbYpyhwa/FuU6lBhfnDmjWGm3mBKgsGx1QEsv4P+fVdL4JzDQxbLOvoQbGexBuD4KhuI8pU85dRcaZOoyy2ZkmNiqzh/aUrtSeLCr4Xh9So/wBm0sz9jUAJ9JN/QSt7/bOMbJNGdNHsJ7aAqx8M5ep0PxHvzHuWtsZsRaQYtqrE2tmuDISMNsS5Ituw/g4OcVOXsQzJLQHG+XNcC+sW1Sty/UBbBbJ1Emy6U6p4XzmDhECNrSp7ayUWol7HNqnLjmWdUa2bwYudJgHwtTiNBtAjqD9yBbbQa/Yq943lek9zntc5jzckGZ/7Tb5QtM8i4d4d7SrWeTvZsegA+6o63nY6adTUt7N/oUvl2k/FVqnT+Ey0NbLnEyQCdoBBMbwrrguU2AE1M94tmG17wL7Kd4DwelhKQZTbA86n1K26tebawteiJy2XuUn07IgKHK1Am7BHm6m8PwOg1sNaBIg21B29F9mqBfRaFeqOo9UAdwCTsBNk+GPoZ9Upcs3+H8EwdMZWYekI1im0n5x/+WUnRqsaLQGt9ICovEeY25fw4ADCXSb5gTLCSOk+TuvPBcbNQEFrhR6S85XPc3qN8rWXMtB1gWnsrRsy8I6KtJZenJPODY5m471ljXNDA4hxBdoI6ZAuTuAdovBKqf8A4i4S5job1Ahw7BkHKSWzmaILbyJ2EW48EwuJa0BpZVcSA2iS7JDQYeXRFzoWtME9NiRUOOcuYjD9Q/Fo/wDUphx0bMOFzBnUEjzoquqSeT39FZRBdvh/P7wz3wPEntLC0vbFrPykxaLAD3joQYiyuvKuIqvflMF8R1vMmD7wmTYeIsVR+GASCQJEEtgGZv0y4GZt2HUug8m4SXEkNIbuI90ZgywnuTc7qO2prpZTxOcO3LbcuNMQACZK+l8sZHf5r6XWuD5QIiKQEREAREQBECIAvOsHR0kA9yCfoCF6L5fMGNdvVQ1lAqnGKhpPvV9pUMzaMo2tf7qAxmBBmoHDK7QHWTp91K8b4WW5nufJ1v8Ac+N1V8aarnMYD0hpsd3Wy38AR6krwbKJTeWsG9cXjJ48TxYbPUDYBvYRoD/f10K9+D0SCajnN9obaNsG3a0AvB8x53VY5kwVQPEAhxbDvgemfr9Fb+D1pptmZLRv7tpOoI1J2mey6Ka+hKR6ujrjhzW7x+XuetRxy5nG4gNGske6cxc5sdJdIe2xzGSQBSuIA53Ra8wDaPymAJMgjqNzJPlXHElgMkAkmB+JTaSDALcwLSQcjTJ2DR3Vc4rUFyN5MQR5Jyi3fVxtAkhdc5ZPWohlNe5TuI1XUqntGFzKkjqa7KbegvMjW1lN4TnriAaAHscP56YLvpA+iicXw+rUlzabnAESY+a1qFjBsRqDqpbaR4mojDutImsdxjGYgzUrEfyiQB8GwpTgPMuIwrcr2e1ZMmH9TRA0Dve+m6hKLhsQttrxvHosutlelYwdDwnOODqC9YNJ1DxlIPmbH1BK3X8fwbA1xxVKHENEPDrkxo2SB3Oy5LXw1Nxu6Hdo2i3zM/LytJuHAdOYR4v9IWq9ynl4s7ni+L4elTNR9UZfFyY7Aaqu0v4gUnPf+HUFMDoMCXHexNrRGu655Tpk7gAd2/HwFuU6LbTf1M/4+Sh2JELTxRa+M8+FzMmHYQ82Ln/lnsGz8yVXMJzPjKADfaFwBJ625h4bmF4Ov23WHZWjUAfAfda2JAvcD4j0VO9uXjVFLGDw4jzPj6jiTWLYNsvSPkLf3Xjw7GYmvWYamIe5rDmIdUdljw28n9F51CCJ37fBb3AeCVMQZ9m4NA96YA3mSLiPT12U5ck0VkkkTXF2tMhpkVMpcRfMA2ANYkiL76nVYpHJEthut5kSYA6SMx9IF1sYkezo06bmy6CA4SRmykluomAREaiRoF81mdNNuxIuGhrd7XNjf7rGjg9nwv4asY9eTawOLqMkNeSzMBZuVjgIJDzZ1hpJkQNNDL4bjbpDhMxN2CROUuyMBLGG19JFxcFRGHwcOInK0GJcGwHQJLyHS0EWg3kwtwYdo8Xy3HumB0O1FxPUT0yBcrrjYzpvjTJ7r9Pv6/8ADdrGjVMOYWOFg5jhqS6S4khrj6C4OuyvPLhpCi1tNwdGpv1HUm91zVtJszcgaZpsLyxwiWu6hc6ybCFLcDpVTWZ7M3Bv1SAAZcZbpPYxrEGFdT3PO1mjjKG0sY3+R0pERbHzgREQBERAEREBgLKw1ZULgBERSDTxmAFTW/r4uFEYvl/No2fiFY0VHWmXU2uCjYjlR50p/wD2b+q1HcuYll20pA2zN+kHXVdERV7SNq9VODyjjfFmXM0303wAQaZ+7bEQ1qisTTfUhrGPcTqXNkD56/4179uxfDqdT3mj5Lyw3BqLLht1l5ffJ6T8Ym6+ng5nwbgddrQBRqR/TqpZ3LHtP+JhpPll/muiBoGizC27Z5TubeTleK/h+x2jKjD4E/QhR+I/h7V/I9/xou+4XY8qxlVXTEK+SOD1+RcYD7pcZ1yuiPiJleT+TsY0wKYI7wR9xPZd8yJkUdhe5fzUjgjeTsV/L8yD42/cLapcpV4BbUYB/S4anyP7LuOVZyqPLoeZkcZo8jOPvVyfRhOvaSpDC/w6ZmlznuG4IiTudV1eEyqVp4kPUyKTwzlChQ0pj43PzK2+K4mnSovaxhzFpADXBpNojN+UeRB7EK15V8uoNOrWn1AVu3thGfczycG4tUqMpPa68uZVMD3SS6YH/KMoFu52UdhOMNbbMIMHQSHXgyd980lfoKpwnDuu6hSJ80mn+y1nctYI/wDo6H/ws/RUjR0o9DS+JOiPSkcT/wByi0G5sdfFzrnOlyPgvvC46tVPTTJkAXAtBMCIkgWIhdsp8v4NumEoD/2GfotylhKbfdpsb6MA+wV1UWs8UcnlROT8O5exVeAM4/mILQPQmSPmF0Tlvl9mFZrmqO95x+19lNIrRgkcl2sttXS3sERFc5AiIgCIiAIiIDDdAsoirD8KAREVgEREAREQBERAEREAREQGEREARZRAEREAREQBERAEREAREQBERAEREAREQBERAf/Z',
      [
        new Ingredient('flour', 3),
        new Ingredient('sugar', 2)

      ])
  ];

  constructor(private shoppingListService: ShoppingListService) {

  }

  getRecipe(index: number) {
    return this.recipes[index];
  }

  getServices() {
    return this.recipes.slice();
  }

  addIngrToShoppingList(ingrs: Ingredient[]) {
    this.shoppingListService.addAll(ingrs);
  }
  addRecipe(recipe:Recipe){
    this.recipes.push(recipe);
    this.recipeChanged.next(this.recipes.slice());
  }
  upDateRecipe(index:number,recipe:Recipe){
    this.recipes[index]=recipe;
    this.recipeChanged.next(this.recipes.slice());
  }
  deleteRecipe(index:number){
    this.recipes.splice(index, 1);
    this.recipeChanged.next(this.recipes.slice());
  }
  setRecipes(recipes:Recipe[]){
    this.recipes = recipes;
    this.recipeChanged.next(this.recipes.slice());
  }
}
